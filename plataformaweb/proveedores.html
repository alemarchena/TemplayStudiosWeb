
    <div id="accordion">
        
        <div class="card">
            <h5>Proveedores <i class="fas fa-address-book"></i></h5>
            <div class="d-flex flex-row justify-content-center p-4">
                <p class="card-text p-1">Los proveedores son quienes te venden los productos.</p>
                <p class="card-text p-1">Deberás marcar que productos compras a cada proveedor para poder cambiar precios masivamente</p>
            </div>
            <div class="card-header container" id="headingOne">
                <h5 class="m-0">
                    <button class="btn btn-primary collapsed" data-toggle="collapse" data-target="#collapseOneProveedor" aria-expanded="true"
                        aria-controls="collapseOneProveedor">
                        Nuevo Proveedor
                    </button>
                </h5>
            </div>
    
            <div id="collapseOneProveedor" class="collapse " aria-labelledby="headingOne" data-parent="#accordion">
                <div class="card-body">
                    <div class="row">
                        <!-- Columna de tarjeta de anuncio -->
                        <div class="col-sm-10 offset-sm-1">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h5 class="card-title">Proveedores</h5>
                    
                                        <div class="row">
                                            <div class="col-sm-12">
                        
                                                <div class="row">
                                                    <div class="col-sm-2 offset-sm-1">
                                                        <!-- id -->
                                                        <input id="idproveedor" disabled value=""
                                                            name="idproveedor                                                                                                                             "
                                                            type="text">
                                                    </div>
                                                    <div class="col col-sm-6">
                                                        <!-- Nuevo -->
                                                        <button class="btn chip " type="button" id="limpiarproveedor" name="limpiarproveedor">Limpiar
                                                    </div>
                                                </div>
                        
                                                <div class="row">
                                                    <div class=" col-sm-4 center">
                                                        <!-- nombre -->
                                                        <input onKeyDown="return validarteclaProveedor(event,this.value,255)"
                                                            onKeyUp="return validarteclaProveedor(event,this.value,255)" id="nombreproveedor"
                                                            name="nombreproveedor" type="text" class="validate center">
                                                        <label for="nombreproveedor">Nombre</label>
                                                    </div>
                                                    <div class=" col-sm-4 center">
                                                        <!-- teléfono -->
                                                        <input onKeyDown="return validarteclaProveedor(event,this.value,255)"
                                                            onKeyUp="return validarteclaProveedor(event,this.value,255)" id="telefonoproveedor"
                                                            name="telefonoproveedor" type="text" class="validate center">
                                                        <label for="telefonoproveedor">Teléfono</label>
                                                    </div>
                                                    <div class=" col-sm-4 center">
                                                        <!-- email -->
                                                        <input onKeyDown="return validarteclaProveedor(event,this.value,255)"
                                                            onKeyUp="return validarteclaProveedor(event,this.value,255)" id="emailproveedor"
                                                            name="emailproveedor" type="text" class="validate center">
                                                        <label for="emailproveedor">Email</label>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class=" col-sm-8 offset-sm-2 center">
                                                        <!-- dirección -->
                                                        <input onKeyDown="return validarteclaProveedor(event,this.value,255)"
                                                            onKeyUp="return validarteclaProveedor(event,this.value,255)" id="direccionproveedor"
                                                            name="direccionproveedor" type="text" class="validate center">
                                                        <label for="direccionproveedor">Dirección</label>
                                                    </div>
                                                </div>
                        
                                                <!-- Boton publicar -->
                                                <div class="row">
                                                    <div class="col-sm-12">
                                                        <button class="btn waves-effect  orange green-4" type="button" id="enviarproveedor"
                                                            name="enviarproveedor">Guardar Proveedor
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-header container" id="headingTwo">
                <h5 class="m-0">
                    <button class="btn collapsed" data-toggle="collapse" data-target="#collapseTwoProveedor"
                        aria-expanded="false" aria-controls="collapseTwoProveedor">
                        Edición o Eliminar
                    </button>
                </h5>
            </div>
            <div id="collapseTwoProveedor" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                <div class="card-body">
                    <div class="row">
                        <!-- Columna de lista de anuncios -->
                        <div class="col-sm-8 offset-sm-2">
                            <div class="row">
                                Lista de Proveedores
                                <!-- <button id="consultar">Consultar</button> -->
                            </div>
                            <div class="table-responsive">
                                <table id="tablaproveedores" class="display table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Editar</th>
                                            <th>Id</th>
                                            <th>Nombre</th>
                                            <th>Direccion</th>
                                            <th>Teléfono</th>
                                            <th>email</th>
                                            <th>Eliminar</th>
                                            <th>Whatsapp</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    
                    </div>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header container " id="headingThree">
                
                <!-- <h5 class="m-0">
                    <button id="btnAsignarproductos" class="btn collapsed" data-toggle="collapse" data-target="#collapseThreeProveedor"
                    aria-expanded="false" aria-controls="collapseThreeProveedor">
                    Asignar Productos / Cambiar Precios
                    </button>
                </h5> -->
                
            </div>
            <div id="collapseThreeProveedor" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
                <div class="card-body">
                    <div class="d-flex flex-row justify-content-center p-4">
                        <p class="card-text">Elija : Asignación de productos  o  Cambio de precio</p>
                    </div>
                    

                    <div class="row container pb-4">
                        <div class="col-sm-5 offset-sm-1">
                            <button id="btnProductosProveedor" class="btn btn-block grey-text text-darken-3 blue lighten-5 tooltipped p-1 " data-position="bottom"  data-tooltip="Panel de asignación" >Asignación de Productos</button>
                        </div>
                        <div class="col-sm-5">
                            <button id="btnCambioPrecios" class="btn btn-block grey-text text-darken-3 amber lighten-5 tooltipped p-1" data-position="bottom"  data-tooltip="Panel de cambio de precios">Cambio de precios</button>
                        </div>
                    </div>

                    <hr >

                    <div id="cabeceraProductosProveedor" class="d-flex flex-row justify-content-center bd-highlight cabecera p-3   blue lighten-5  rounded">
                        <div class="col-sm-4 ">
                            
                        </div>
                        <div class="col-sm-4">
                            <label id="labelopcionlistaproveedores" for="opcioneslistaproveedores" class="colorletras">Lista de Proveedores</label>
                            <select class="form-control" id="opcioneslistaproveedores" name="opcioneslistaproveedores"></select>
                        </div>
                        <div class="col-sm-4">
                    
                        </div>
                    </div>
                    
                    <hr>

                    <div class="row">
                        <div class="col-sm-12">
                            
                            
                            <div id="subcabeceraProductosProveedor" class="d-flex flex-row justify-content-center bd-highlight cabecera p-3   blue lighten-5">
                                <div class="col-sm-12">
                                    <div class="d-flex flex-row justify-content-center p-4">
                                        <p class="card-text">Busque los productos por rubro o por producto</p>
                                    </div>
                                    
                                    <div class="accordion" id="accordionExample">
                                        <div class="d-flex flex-row justify-content-center p-4">
                                            <div class="col-sm-4">
    
                                                <div class="card">
                                                    <div class="card-header " id="headingOne">
                                                        <h2 class="m-0">
                                                            <button class="btn btn-block collapsed" type="button" data-toggle="collapse"
                                                                data-target="#collapseBuscaxRubro" aria-expanded="true" aria-controls="collapseBuscaxRubro">
                                                                Consultar por rubro
                                                            </button>
                                                        </h2>
                                                    </div>
                                            
                                                    <div id="collapseBuscaxRubro" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
                                                        
                                                            <!-- consultar por rubros -->
                                            
                                                            <div class="row justify-content-center bd-highlight">
                                            
                                                                <div class="col-sm-12">
                                                                    <label for="opcioneslista">Selecciona un Rubro a buscar</label>
                                                                    <select class="form-control" id="opcioneslista" name="opcioneslista"></select>
                                                                </div>
                                                            </div>
                                            
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-sm-8">
                                            
                                                <div class="card">
                                                    <div class="card-header " id="headingTwo">
                                                        <h2 class="m-0">
                                                            <button id="btnconsultaxrubro" class="btn btn-block collapsed" type="button" data-toggle="collapse"
                                                                data-target="#collapseFiltro" aria-expanded="false" aria-controls="collapseFiltro">
                                                                Consultar por productos
                                                            </button>
                                                        </h2>
                                                    </div>
                                                    <div id="collapseFiltro" class="collapse" aria-labelledby="headingTwo" data-parent="#accordionExample">
                                                        
                                                            <!-- consultar con filtros -->
                                                            <div class="row justify-content-center py-1">
                                            
                                                                <div class="col-sm-11 ">
                                                                    <div class="row justify-content-center bd-highligh">
                                                                        <div id="criterios_proveedoranuncios" class="col-sm-6">
                                            
                                                                        </div>
                                                                        <div class="col-sm-5">
                                                                            <label for="filtro_proveedoranuncios">Filtro</label> <input id="filtro_proveedoranuncios"
                                                                                name="filtro_proveedoranuncios" type="text"  data-position="top"  data-tooltip="Escriba una palabra a buscar y da Enter"
                                                                                class="validate tooltipped" onKeyUp="validarfiltroproveedoranuncio(event)"
                                                                                placeholder="¿Qué busca...?">
                                                                        </div>
                                                                        <div class="col-sm-1">
                                                                            <a id="agregar_filtro_productos"><img src="img/icono_suma.png" alt="Agregar" class="tooltipped" data-position="bottom"  data-tooltip="Agrega un filtro"></a>
                                                                        </div>
                                            
                                                                    </div>
                                                                </div>
                                            
                                                                <div class="col-sm-1 ">
                                                                    <a id="consulta"><img src="img/icono_catalogo.png" alt="Catalogo" class="tooltipped" data-position="bottom"  data-tooltip="Busca todos los productos o aquellos filtrados"></a>
                                                                </div>
                                            
                                                            </div>
                                                        
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                           </div>

            <!-- ------------- Productos para asignar o cambiar precios --------------------- -->
                            
                            <div id="filapregunta" class="p-2">
                                <h5 id="h5Titulo">Productos para asignar</h5>
                            </div>
                            <p id="explicaasignacion" class="card-text">Marcar uno a uno los productos a asignar o bien usar los botones de cambio masivo</p>
                            <div id="explicacambioprecio" class="row justify-content-center" style="display: none;">
                                <div class="col-sm-12">
                                    <div class="row justify-content-center">
                                        <p class="card-text">1-Ingresar solo el número de porcentaje a aplicar</p>
                                      
                                        <input id="porcentaje" name="porcentaje" placeholder="Ej: 10" data-position="top"
                                            data-tooltip="Porcentaje de aumento o disminución que aplicará sobre el precio costo y venta actual del producto"
                                            onKeyDown="return validarnumero(event, this.value, 6)" onKeyUp="return validarnumero(event, this.value, 6)"
                                            type="text" class="validate  waves-effect columnadecuatro tooltipped amber lighten-5 border border-light ml-1"
                                            ></input>
                                    </div>

                                    <div class="row justify-content-center">
                                        <div class="col">
                                            <div class="row justify-content-center">
                                                <p class="card-text">2-Marcar a que le aplica el cambio (venta/costo)</p>
                                            </div>
                                            <div class="row justify-content-center">
                                                <p class="mr-1">
                                                    <label>
                                                        <input id="aplicaacosto" type="checkbox" class="filled-in" />
                                                        <span class="colorletras">Aplicar al costo</span>
                                                    </label>
                                                </p>
                                                <p class="ml-1">
                                                    <label>
                                                        <input id="aplicaaventa" type="checkbox" class="filled-in" />
                                                        <span class="colorletras">Aplicar al precio venta</span>
                                                    </label>
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row justify-content-center">
                                        <p class="card-text">3-Marcar los productos a modificar</p>
                                    </div>

                                    <div class="row justify-content-center">
                                        <p class="card-text">4-Presionar el botón de cambio masivo</p>
                                    </div>
                                    
                                    <div class="row justify-content-center">
                                        <p>
                                            <label>
                                                <input id="opcionredondear" type="checkbox" class="filled-in" checked="checked" />
                                                <span >Redondear a decena</span>
                                            </label>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        
                            <hr>
                            

                            <div class=" col-sm-2">
                                <input style="display: none;" id="idproveedorelegido" name="idproveedorelegido" type="text">
                                <input style="display: none;" id="proveedorelegido" name="proveedorelegido" type="text">
                            </div>

                            <div class="table-responsive">
                                <table id="tablaanunciosproveedores" class="display table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Título</th>
                                            <th class="columnadedos center">
                                                
                                                <label id="" for="labelaltabaja">Botones de cambio masivo</label>
                                                <a id="btnaltaanuncio" onclick='agregaquitatodosprovanun("alta")' class="btn-floating btn-sm waves-effect waves-light   blue  tooltipped" data-position="right"  data-tooltip="Asignación masiva de productos" ><i class="material-icons">save</i>
                                                <a id="btnbajaanuncio" onclick='agregaquitatodosprovanun("baja")' class="btn-floating btn-sm waves-effect waves-light  pink accent-1 tooltipped" data-position="left"  data-tooltip="Desasignación masiva de productos"><i class="material-icons">save</i>
                                                <a id="btnpreciosumar" onclick='cambiapreciosmasivos("sumar")' class="btn-floating btn-sm waves-effect waves-light  amber  tooltipped" data-position="right"  data-tooltip="Aumentar masivamente los precios" style="display: none;"><i class="material-icons">save</i>
                                                <a id="btnpreciorestar" onclick='cambiapreciosmasivos("restar")' class="btn-floating btn-sm waves-effect waves-light   amber darken-4  tooltipped" data-position="left"  data-tooltip="Disminuir masivamente los precios" style="display: none;"><i class="material-icons">save</i>
                                            </th>
                            

                                            <th>Descripción</th>
                                            <th class="columnadedos center">Costo</th>
                                            <th class="columnadedos center">Precio Vta</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td></td>
                                            <td class="columnadedos center"></td>
                                            <td></td>
                                            <td class="columnadedos center"></td>
                                            <td class="columnadedos center"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            
                        </div>
                    </div>

                </div>
            </div>
        </div>
       
    </div>

    
    

    
        
    <!-- </form> -->

<script>

            
        

    $(document).ready(function () 
    {
        //configuracion de la tabla
        consultarubros_seleccion_lista();
        configuraciontablaproveedores();
        configuraciontablaproveedorproductos();
        consultaproveedores_seleccion_lista(); //llena la lista del buscador

       $("#enviarproveedor").click(function () {
            EnviarFormularioProveedores();
        });

        //trae los anuncios al cargar la pagina
        consultarproveedores();

        $("#limpiarproveedor").click(function () {
            limpiarformularioproveedor();
        });

        $("#opcioneslistaproveedores").change(function () {
            var o = document.getElementById("opcioneslistaproveedores");
            var opcion = o.options[o.selectedIndex].text;
            document.getElementById('proveedorelegido').value = opcion;

            var alturamenu = $('.menu').outerHeight(true);//mide la altura del objeto con margen borde y padding externo
            var poscontacto = $("#subcabeceraProductosProveedor").offset().top - alturamenu;
            $("HTML, BODY").animate({ scrollTop: poscontacto }, velocidadscroll);

            if ($.fn.dataTable.isDataTable('#tablaanunciosproveedores')){
                tas = $('#tablaanunciosproveedores').DataTable();
                tas.clear().draw(true);
            }
        });

        $("#opcioneslista").on('change', function () 
        {
            if(estaAsignandoProductos)
                consultarProveedoresProductosXrubro("consultarubros");
            else
                consultarProveedoresProductosXrubro("consultarubrosdelproveedor");

            M.toast(
                {
                    html: 'Buscando productos por rubro...',
                    displayLength: '3000'
                });
        });

        $("#consulta").click(function () 
        {

            if (estaAsignandoProductos)
                consultarProveedoresProductosXfiltro("consultafiltros");
            else
                consultarProveedoresProductosXfiltro("consultafiltrosdelproveedor");
            M.toast(
                {
                    html: 'Buscando productos filtrados...',
                    displayLength: '3000'
                });
        });

        $("#agregar_filtro_productos").click(function () 
        {
            if (estaAsignandoProductos)
                agregarfiltroproveedoranuncio("consultafiltros");
            else
                agregarfiltroproveedoranuncio("consultafiltrosdelproveedor");
        });

       

        $("#btnProductosProveedor").click(function(){
            $("#h5Titulo").text("Asignar Productos al Proveedor");
            $("#cabeceraProductosProveedor").removeClass("amber lighten-5");
            $("#cabeceraProductosProveedor").addClass("  blue lighten-5");

            $("#subcabeceraProductosProveedor").removeClass("amber lighten-5");
            $("#subcabeceraProductosProveedor").addClass("  blue lighten-5");

            
           $("#btnaltaanuncio").show();
           $("#btnbajaanuncio").show();
           $("#labelaltabaja").show();
           $("#explicaasignacion").show();
           
           $("#btnpreciosumar").hide();
           $("#btnpreciorestar").hide();
 
           $("#labelporcentaje").hide();
           $("#explicacambioprecio").hide();
           
           var alturamenu = $('.menu').outerHeight(true);//mide la altura del objeto con margen borde y padding externo
           var poscontacto = $("#cabeceraProductosProveedor").offset().top - alturamenu;
           $("HTML, BODY").animate({ scrollTop: poscontacto }, velocidadscroll);

           estaAsignandoProductos = true;
           $("#tablaanunciosproveedores_filter :input").show();
        });
        
        $("#btnCambioPrecios").click(function () {
            $("#h5Titulo").text("Cambio de Precios");
            $("#cabeceraProductosProveedor").removeClass("  blue lighten-5");
            $("#cabeceraProductosProveedor").addClass("amber lighten-5");
            
            $("#subcabeceraProductosProveedor").removeClass("  blue lighten-5");
            $("#subcabeceraProductosProveedor").addClass("amber lighten-5");
            
            $("#btnaltaanuncio").hide();
            $("#btnbajaanuncio").hide();
            $("#labelaltabaja").hide();
            $("#explicaasignacion").hide();
            
            $("#btnpreciosumar").show();
            $("#btnpreciorestar").show();
          
            $("#labelporcentaje").show();
            $("#explicacambioprecio").show();
            
            var alturamenu = $('.menu').outerHeight(true);//mide la altura del objeto con margen borde y padding externo
            var poscontacto = $("#cabeceraProductosProveedor").offset().top - alturamenu;
            $("HTML, BODY").animate({ scrollTop: poscontacto }, velocidadscroll);

            estaAsignandoProductos = false;

            $("#tablaanunciosproveedores_filter :input").hide();
       });

       
        $('.tooltipped').tooltip();
       
});
</script>