<!doctype html>
<div lang="en">

    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- autenticacion -->
        <script src="https://www.gstatic.com/firebasejs/ui/4.5.0/firebase-ui-auth.js"></script>
        <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.5.0/firebase-ui-auth.css" />
        
        <!-- fuentes de google -->
        <link href="https://fonts.googleapis.com/css?family=Oswald&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.8.11/css/mdb.min.css" rel="stylesheet">
        
        <!-- Bootstrap core CSS -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css"
            rel="stylesheet">
        <!-- Material Design Bootstrap -->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.8.11/css/mdb.min.css" rel="stylesheet">
        <!-- materialize -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
        <!-- iconos materialize -->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!-- Material Design Theming -->
        <link rel="stylesheet" href="https://code.getmdl.io/1.1.3/material.orange-indigo.min.css">

        <script defer src="https://code.getmdl.io/1.1.3/material.min.js"></script>

        <!-- datatable -->
        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.css">
        <!-- mensajes de sweetalert -->
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>


        <link rel="stylesheet" type="text/css" href="cover.css">
        <link rel="icon" type="image/png" src="imagenessitio/logoempresa.png">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.0.0/animate.min.css" />
        
        <script src="configuracion.js"></script>
       
        <script type="text/javascript">
            idclienteini           = "";
            nombreclienteini       = "";
            telefonoclienteini     = "";
            direccionclienteini    = "";
            emailclienteini        = "";
        </script>

        <title>Carrito de Pedidos</title>

        
    </head>
<body>
    <nav class="navbar sticky-top" style="height: 120%;background-color: #fff159;">

        <form class="form-inline" style="color: black;">
            <a class="navbar-brand" href="#" style="color: black;">
            </a>
            <img id="imagenempresa" src="img/logoempresa.png" width="50px" class="d-inline-block align-top"
            alt="Empresa">

            <h5 id="tituloweb"  style="margin:0em 0em 0em 1em"></h5>
            <p id="telefono_en_barra" style="margin:0em 0em 0em 1em"></p>
            <p id="direccionfisica" style="margin:0em 0em 0em 1em"></p>
        </form>            
        
        <form class="form-inline" style="color: black;" id="botonescarrito" >
            <button class="btn waves-effect  orange green-4 tooltipped" data-position="bottom" data-tooltip="Buscar productos"
            type="button" id="verbusqueda" name="verbusqueda"><i class="fas fa-search"></i> Seguir buscando</button>
            
            <button class="btn waves-effect  orange green-4 tooltipped" data-position="bottom" data-tooltip="Ver Carrito"
            type="button" id="vercarrito" name="vercarrito"><i class="fas fa-shopping-cart"></i> Ver Carrito</button>
            <span class="nav-item ml-1" id="btncantidadcarrito" ></span>
        </form>
    </nav>

      
    <hr>
    <div id="seccionlogocarrito" class="fixed-top text-center" style="z-index: -2; padding-top: 8em;border-bottom border-success">
        <div class="col">
            <img src="imagenessitio/logocarrito.png" alt="" style="opacity:0.3; width: 50%;">
        </div>
    </div>
    
    <div id="sectorbusqueda" style="z-index:-1; margin-top: 3em;margin-bottom: 2em;">
        <div class="row justify-content-center align-items-top bd-highlight">
            
            <div class="col-sm-3 center" >
                <div class="row justify-content-center ">
                    <h3>Carrito de compras</h3>
                </div>

                <div class="row justify-content-center ">
                    <p class="blue-text text-darken-4"><b>Crea tu cuenta</b></p>
                </div>

                <div class="row justify-content-center ">
                    <p><small>Al registrarte por primera vez, te enviaremos un email para que confirmemos que eres el propietario de la cuenta de correo</small></p>
                </div>

            </div>
            <div class="col-sm-6 center" >
                <div id="logincliente" class="d-flex flex-row justify-content-center align-items-center bd-highlight ">
                    <div id="plataforma" class="row justify-content-center">
                        <!-- <form method=post action=""> -->
                        <div class="col-sm-8">
                            <div id="tarjeta" class="card text-center">
                                <div class="card-header">
                                    Autenticación
                                </div>
                                <div class="card-body">
                                    <h5 class="card-title">Ingresa tus datos</h5>
                                   
                                    <div class="d-flex justify-content-center mt-4 row">
                                        <input class="mdl-textfield__input center" onKeyUp="return verificaenter(event)"
                                            style="display:inline;width:65%;" type="text" id="email" name="email" placeholder="Email" />
                                        &nbsp;&nbsp;&nbsp;
                                    </div>
                                    <div class="d-flex justify-content-center mt-4 row">
                                        <input class="mdl-textfield__input center" onKeyUp="return verificaenter(event)"
                                            style="display:inline;width:65%;" type="password" id="password" name="password"
                                            placeholder="Password" />
                                        <br /><br />
                                    </div>
                
                                    <div class="d-flex justify-content-center mt-4 row">
                                        <button disabled class="mdl-button mdl-js-button mdl-button--raised amber"
                                            id="quickstart-sign-in" name="signin">Ingresar</button>
                                        &nbsp;&nbsp;&nbsp;
                
                                        <button class="mdl-button mdl-js-button mdl-button--raised" id="quickstart-sign-up"
                                            name="signup">Registrarse</button>
                                        &nbsp;&nbsp;&nbsp;
                                    </div>
                
                
                                    <div class="d-flex justify-content-center row">
                                        <button class="mdl-button mdl-js-button mdl-button--raised" disabled
                                            id="quickstart-verify-email" name="verify-email" style="visibility: hidden;">Enviarme email de Verificación</button>
                                        &nbsp;&nbsp;&nbsp;
                                    </div>
                                    <div class="d-flex justify-content-center mt-1 row">
                                        <!-- <a class="mdl-button mdl-js-button mdl-button--raised" id="quickstart-password-reset" name="verify-email">¿Has olvidado tu contraseña?</a> -->
                                        <a class="btn-link blue-text text-darken-2" id="quickstart-password-reset"
                                            name="verify-email"><small> ¿Has
                                            olvidado tu contraseña?</small></a>
                
                                    </div>
                
                                </div>
                            </div>
                            <div class="card-footer text-muted">
                                
                                <!-- Container where we'll display the user details -->
                                <div class="quickstart-user-details-container"><small></small><span id="quickstart-sign-in-status">Desconocido</span></small>
            
                                    <pre><code id="quickstart-account-details"> </code></pre>
                                </div>
                                <div class="d-flex justify-content-center row">
                                    <p id="textoexplicacion" style="visibility: hidden;color: red;"><small>Por seguridad te enviamos un correo para
                                            que verifiquemos que es tuya la cuenta.</small></p>
                                </div>
                            </div>
                        </div>
                        <!-- </form> -->
                
                
                    </div>
                </div>
            </div>
            <div class="col-sm-3 center">
                <p class="blue-text text-darken-4"><b>¿ Como comprar ?</b></p>
                <p><small>Ingresas, buscas el producto y lo añades</small></p>
                <p><small>En el carrito puedes modificar las cantidades y pagar</small></p>
            </div>
        </div>
        
        <!-- <div class="d-flex flex-row justify-content-center align-items-center bd-highlight mt-5 pt-3">
            <div class="col-sm-12 center">
                <button class="btn waves-effect btn-primary" type="button" id="entendido" name="entendido">Entendido</button>
            </div>
        </div> -->
    </div>
    
    
    <!-- ---------------------------------- Script externos ---------------------------------------------- -->
    
    <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.2.0/firebase-firestore.js"></script>


    <script>
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyACbT_r6IpIrDPSa7OCMGSvnjpdxNc-hrA",
            authDomain: "clientesclientes-31063.firebaseapp.com",
            databaseURL: "https://clientesclientes-31063.firebaseio.com",
            projectId: "clientesclientes-31063",
            storageBucket: "clientesclientes-31063.appspot.com",
            messagingSenderId: "194196006751",
            appId: "1:194196006751:web:03a9b54debeb75f3c7b8ea",
            measurementId: "G-0K0MSJFZQ8"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);

    </script>

  
    <!-- --------------------------------------- LIBRERIAS NECESARIAS ---------------------------------- -->
    <!-- JQuery -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!-- Bootstrap tooltips -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <!-- MDB core JavaScript -->
    <!-- <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.8.11/js/mdb.min.js"></script> -->
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <!-- para mostrar la tabla -->
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.js"></script>
    <!-- para mostrar los toast -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9.4.3/dist/sweetalert2.all.min.js"></script> -->

    <script src=funciones.js> </script> 

    
</body>

<script type="text/javascript">


    function ocultabotones() {

        $("#botonescarrito").hide();
    }
    ocultabotones();

    /**
     * INGRESO AL SISTEMA.
     */
    function toggleSignIn() {
        if (firebase.auth().currentUser) {
            // [START signout]
            firebase.auth().signOut();
            // [END signout]
        } else {
            var email = document.getElementById('email').value;
            var password = document.getElementById('password').value;
           
            if (email.length < 4) {
                swal("Atención", "Ingrese una dirección de email!");
                return;
            }
            if (password.length < 4) {
                swal("Atención", "Ingrese una clave!");

                return;
            }

            firebase.auth().signInWithEmailAndPassword(email, password).catch(function (error) {
                var errorCode = error.code;
                var errorMessage = error.message;
                if (errorCode === 'auth/wrong-password') {
                    swal("Contraseña", "La clave es incorrecta.");
                } else {
                    swal("Error", "No existe un usuario con este email");
                }
                console.log(error);
                document.getElementById('quickstart-sign-in').disabled = false;
            });
        }
        document.getElementById('quickstart-sign-in').disabled = true;
    }

    /**
     * REGISTRO NUEVO EN EL SISTEMA.
     */

    function consultarusuario() {

        var email = document.getElementById('email').value;

        objeto = new Object();
        objeto.bdd = conexionbddpaginaweb;
        objeto.tabla = tablaclientespaginaweb;
        objeto.tipo = "verificar";
        objeto.emailcliente = email.trim();
        objeto.nombrecliente = "";
        var cliente = JSON.stringify(objeto);

        $.ajax({

            url: "consultaclientes.php",
            data: { cliente: cliente },
            type: "post",
            
            success: function (data) {
                

                if (data == "consultavacia" || data == "[]") {
                    crearusuario();
                } else if (data == "nobdd") {
                    console.log("No se conecto a la base de  datos");

                } else if (data >= "1") {

                    var dd = JSON.parse(data);
                    var idencontrado=0;

                    $.each(dd, function (key) {
                        idencontrado = dd[key].idcliente;
                    });

                    actualizaemailusuario(idencontrado);
                    console.log("Encontro el id " + idencontrado);
                    // swal("Usuario!", "Ya existe alguien con este email!");

                } else {
                    console.log("Otro error " + data);
                }


            },
            error: function (e) {
                console.log("Error:" + e);
            }
        });
    }

    
    
    function actualizaemailusuario(idpasado) {

        var email = document.getElementById('email').value;
      
        objeto = new Object();
        objeto.bdd = conexionbddpaginaweb;
        objeto.tabla = tablaclientespaginaweb;
        objeto.emailcliente = email.trim();

        objeto.id = idpasado;
        objeto.nombrecliente = "";
        objeto.direccioncliente = "";
        objeto.telefonocliente = "";
        objeto.tipo = "actualizaemail";
        var cliente = JSON.stringify(objeto);


        M.toast({ html: 'Trabajando...' });

        $.ajax({

            url: "consultaclientes.php",
            data: { cliente: cliente },
            type: "post",

            success: function (data) {



                if (data == "nobdd") {
                    console.log("No se conecto a la base de  datos");

                } else if (data == "1") {
                    console.log("Usuario creado");
                    M.toast({ html: 'Guardando...' });

                    //handleSignUp();
                    //swal("Usuario Creado!", "Presione 'Verificar cuenta' para continuar!");


                } else {
                    console.log("Otro error " + data);
                }
            },
            error: function (e) {
                console.log("Error:" + e);
            }
        });

    }

    function crearusuario() {

        var email = document.getElementById('email').value;
        var password = document.getElementById('password').value;
        

        if (email.length < 4) {
            swal("Email", "Por favor ingrese una dirección de correo.");
            return;
        }
        if (password.length < 4) {
            swal("Contraseña", "Ingrese una clave de al menos 4 digitos");
            return;
        }

        
      
        objeto = new Object();
        objeto.bdd = conexionbddpaginaweb;
        objeto.tabla = tablaclientespaginaweb;
        objeto.emailcliente = email.trim();
        
        objeto.id = 0;
        objeto.direccioncliente = "";
        objeto.telefonocliente = "";
        objeto.tipo = "alta";
        var cliente = JSON.stringify(objeto);

        console.log("Alta al cliente en base mia " + cliente);

        M.toast({ html: 'Trabajando...' });

        $.ajax({

            url: "consultaclientes.php",
            data: { cliente: cliente },
            type: "post",

            success: function (data) {

                console.log("Viene de crear " + data);

                if (data == "nobdd") {
                    console.log("No se conecto a la base de  datos");

                } else if (data == "1") {
                    console.log("Usuario creado");
                    M.toast({ html: 'Guardando...' });

                    //handleSignUp();
                    //swal("Usuario Creado!", "Presione 'Verificar cuenta' para continuar!");


                } else {
                    console.log("Otro error " + data);
                }
            },
            error: function (e) {
                console.log("Error:" + e);
            }
        });

    }


    function handleSignUp() {


       
        var email = document.getElementById('email').value;
        var password = document.getElementById('password').value;
        document.getElementById('textoexplicacion').style.visibility = "visible";


        firebase.auth().createUserWithEmailAndPassword(email, password).catch(function (error) {

            var errorCode = error.code;
            var errorMessage = error.message;
            if (errorCode == 'auth/weak-password') {
                document.getElementById('textoexplicacion').style.visibility = "hidden";

                swal("Contraseña", "La clave es demasiado débil.");


            } else if(errorcode == 'auth/email-already-in-use'){
                document.getElementById('textoexplicacion').style.visibility = "hidden";
                swal("Error" , errorMessage);
               
                console.log("Resultado:" + errorCode);
            }

        });
        mensajeok(email, password);
    }

    function mensajeok(email, password) {

        
        if (email.length >= 4 && password.length >= 4)
        {

        
            const swalWithBootstrapButtons = Swal.mixin({
                customClass: {
                    confirmButton: 'btn btn-success',
                    cancelButton: 'btn btn-danger'
                },
                buttonsStyling: false
            })

            swalWithBootstrapButtons.fire({
                title: 'Usuario Creado!',
                text: "Te Enviaremos un email para verificar que es el propietario de la cuenta!",
                icon: 'warning',
                showCancelButton: false,
                confirmButtonText: 'OK',
                cancelButtonText: 'No, cancelar!',
                reverseButtons: true
            }).then((result) => {
                if (result.value) {
                    sendEmailVerification();
                    consultarusuario();
                    MandaEmail(email);

                } else if (
                    /* Read more about handling dismissals below */
                    result.dismiss === Swal.DismissReason.cancel
                ) {
                    swalWithBootstrapButtons.fire(
                        'Perfecto',
                        'Si cambias de opinión presiona el botón verificar :)'
                    )
                }
            })
        }
    }

    /**
     * Sends an email verification to the user.
     */
    function sendEmailVerification() {
        firebase.auth().currentUser.sendEmailVerification().then(function () {
            
        });
        document.getElementById('quickstart-verify-email').style.visibility = "hidden";
        swal("Genial!", "Ya tienes un enlace de verificación en tu email");

        firebase.auth().signOut();
    }

    function sendPasswordReset() {
        var email = document.getElementById('email').value;
        firebase.auth().sendPasswordResetEmail(email).then(function () {
            swal("Enviado!", "Abra su email y resetee su clave!");
        }).catch(function (error) {
            var errorCode = error.code;
            var errorMessage = error.message;
            if (errorCode == 'auth/invalid-email') {
                swal("Error", errorMessage);
            } else if (errorCode == 'auth/user-not-found') {
                swal("Error", errorMessage);
            }
            console.log(error);
        });
    }

    function MandaEmail(email) {

        var emailnuevo = new FormData();
        var xhrnuevo = new XMLHttpRequest();

        // CONFIGURACION INICIO
        xhrnuevo.open('POST', dominioruta + 'controladores/emailnuevousuario.php');
        //CONFIGURACION FIN

        xhrnuevo.withCredentials = true;

        emailnuevo.append('email', email);
        xhrnuevo.send(emailnuevo);

    }

    function initApp() {
        // Listening for auth state changes.
        firebase.auth().onAuthStateChanged(function (user) {
            document.getElementById('quickstart-verify-email').disabled = true;


            if (user) {
                // User is signed in.
                var displayName = user.displayName;
                var email = user.email;
                var emailVerified = user.emailVerified;
                var photoURL = user.photoURL;
                var isAnonymous = user.isAnonymous;
                var uid = user.uid;
                var providerData = user.providerData;

                document.getElementById('quickstart-sign-in-status').textContent = 'Conectado';
                document.getElementById('quickstart-sign-in').textContent = 'Reintentar';
               

                // document.getElementById('quickstart-account-details').textContent = JSON.stringify(user, null, '  ');

                if (!emailVerified) {
                    document.getElementById('quickstart-verify-email').disabled = false;

                    document.getElementById('quickstart-verify-email').style.visibility = "visible";
                    document.getElementById('quickstart-password-reset').style.visibility = "hidden";
                } else {
                    document.getElementById('quickstart-password-reset').style.visibility = "visible";
                    document.getElementById('quickstart-verify-email').style.visibility = "hidden";
                    document.getElementById('textoexplicacion').style.visibility = "hidden";

                    verificarusuario();
                }
            } else {
                document.getElementById('quickstart-sign-in-status').textContent = 'Desconectado';
                document.getElementById('quickstart-sign-in').textContent = 'Ingresar';
                document.getElementById('quickstart-account-details').textContent = '';
            }
            document.getElementById('quickstart-sign-in').disabled = false;
        });

        document.getElementById('quickstart-sign-in').addEventListener('click', toggleSignIn, false);
        document.getElementById('quickstart-sign-up').addEventListener('click', handleSignUp, false);
        document.getElementById('quickstart-verify-email').addEventListener('click', sendEmailVerification, false);
        document.getElementById('quickstart-password-reset').addEventListener('click', sendPasswordReset, false);

    }

    window.onload = function () {
        initApp();
    };
</script>

<script>
    arregloenbusqueda = [];
    arreglocarrito= [];
    cantidadcarrito=0;
    quecargo="inicio";
 

    function cambiacantidadcarrito(cantidadpasada) {
            cantidadcarrito = cantidadcarrito + cantidadpasada;
            vercantidad();
    }
    
    
    //  $("#entendido").click(function () {
         
    //         if (quecargo != "busqueda") {
    //             carritobusqueda();
    //         }
    //     });
    $("#verbusqueda").click(function () {

        $("html, body").animate({ scrollTop: 0 }, 50);

        if (quecargo != "busqueda" ) {
            carritobusqueda();
        }
    });
    function carritobusqueda() {
        $("#sectorbusqueda").load("carritobusqueda.html");
        habilitabotones();
                            
    }

    $("#vercarrito").click(function () {
      
        $("html, body").animate({ scrollTop: 0 }, 50);
        

        if (quecargo != "carrito") {
            carritoestado();
        }
    });
    function carritoestado(){$("#sectorbusqueda").load("carritoestado.html");}

    function establecevaloresvariables(){
        document.getElementById("tituloweb").innerText = tituloweb;
        document.getElementById("telefono_en_barra").innerText = telefono_en_barra;
        document.getElementById("direccionfisica").innerText = direccionfisica;

    }
    establecevaloresvariables();

    function vercantidad(){
        document.getElementById("btncantidadcarrito").innerText = cantidadcarrito + " artículos";
    }
    vercantidad();

    function calculatotal() {

        var sumatotal = 0;
        var men = document.getElementById("mensaje");
        men.value = "";

        arreglocarrito.forEach(function (valor, indice) {

            sumatotal = sumatotal + parseInt(arreglocarrito[indice].subtotal);
            men.value = men.value + "\n" + 
                        "Cantidad :" + arreglocarrito[indice].cantidad + " " + 
                        arreglocarrito[indice].titulo + " " + 
                        "$ " + arreglocarrito[indice].precio + " " + 
                        "subtotal $ " + arreglocarrito[indice].subtotal;
                        men.value = men.value + "\n";
        });

        var totcarrito = document.getElementById('totalcarrito');
        totcarrito.value = "\n \n Total $ " + sumatotal;
        men.value = men.value + " * Total * $ " + totcarrito.value;

    }

    $(document).ready(function () {
        $('.tooltipped').tooltip();
    });

    
   $("#imagenempresa").click(function(){
       posicioninicial();
   });

    
    
    $(window).on('scroll', function () {

        
        $("#imagenempresa").mousemove(function (event) {
            if ($(window).scrollTop() > 350) {
                $("#imagenempresa").addClass('animate__pulse animated');
            }else{
                $("#imagenempresa").removeClass('animate__pulse animated');
            }
        });
        

        $("#imagenempresa").mouseleave(function (event) {
            $("#imagenempresa").removeClass('animate__pulse animated');
        });
    });

    
        function verificaenter(e) {

            var key = window.event ? e.which : e.keyCode;

            if (key == 13) {
                toggleSignIn();
            }

        }


        function verificarusuario() {

            var email = document.getElementById('email').value;

            objeto = new Object();
            objeto.bdd = conexionbddpaginaweb;
            objeto.tabla = tablaclientespaginaweb;
            objeto.tipo = "verificar";
            objeto.emailcliente = email.trim();
            var cliente = JSON.stringify(objeto);
            M.toast({ html: 'Autenticando...', displayLength: '1000', classes: 'rounded' });

            $.ajax({

                url: "consultaclientes.php",
                data: { cliente: cliente },
                type: "post",

                success: function (data) {

                    if (data != "consultavacia" && data != "[]") {

                        var dd = JSON.parse(data);
                        
                        $.each(dd, function (key) {

                            idclienteini = dd[key].idcliente;
                            nombreclienteini = dd[key].nombrecliente;
                            telefonoclienteini = dd[key].telefono;
                            direccionclienteini = dd[key].direccion;
                            emailclienteini = dd[key].email;
                        });

                        carritobusqueda();

                        firebase.auth().signOut();

                    } else {
                        console.log("Otro error " + data);
                        // swal("El propietario del sitio a restringido el permiso de ingreso");
                        consultarusuario();

                        firebase.auth().signOut();

                    }


                },
                error: function (e) {
                    console.log("Error:" + e);
                }
            });
        }


        function habilitabotones(){
            $("#botonescarrito").show();
        }
</script>