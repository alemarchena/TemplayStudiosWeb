<div id="divpromociones" class="d-flex flex-row justify-content-center align-items-center"><small>
        <h5>Promociones</h5>
    </small></div>
    
<div id="ofertasanuncios" class="row justify-content-center">


</div> 

<script>



    var bdd = conexionbddpaginaweb;
    var rutadeimagenes = rutaimagenespaginaweb;
    var tabla = tablaanunciospaginaweb;
    var tabladerubros = tablarubrospaginaweb;

    function consultaranunciosofertas(e)
    {
        var seveelprecio = true;

        var tipo;
        tipo = "consultatodosanunciosoferta";

        var t=null;
        var id="";

        if (id == "") id = 0;
        else id = id;

        var itemanuncio = new Object();

        itemanuncio.bdd = bdd;
        itemanuncio.tabla = tabla;
        itemanuncio.tablarubros = tabladerubros;

        itemanuncio.tipo = tipo;
        itemanuncio.id = id;

        itemanuncio.titulo = "";
        itemanuncio.descripcion = "";
        itemanuncio.precio = "";
        itemanuncio.costo = "";
        itemanuncio.esnovedad = "";
        itemanuncio.esoferta = "";
        itemanuncio.nopublicar = "";
        itemanuncio.observaciones = "";
        itemanuncio.comentarios = "";

        itemanuncio.rutaimagenes = rutadeimagenes;
        itemanuncio.idrubro = "";
        itemanuncio.imagen = "";
        itemanuncio.filtro = "";

        var objetoanuncio = JSON.stringify(itemanuncio);

        t = $('#ofertasanuncios');
        $(".hijosofer").remove();

        $.ajax({
            url: "consultaanuncios.php",

            data: { objetoanuncio: objetoanuncio},
            type: "post",

            success: function (data)
            {

                dd = JSON.parse(data); //data decodificado
                var cuenta = 0;
                var parteobservacion = "";
                var partecomentarios = "";
                var colapsocomentarios = "";
                var colapsoobservaciones = "";
                var valorbonus="";

                $.each(dd, function (key, value) {
                    cuenta = cuenta + 1;

                    parteobservacion = "";
                    partecomentarios = "";
                    colapsocomentarios = "";
                    colapsoobservaciones = "";
                    // botoncarrito = "<a href ='" + dominioruta + "carrito.html' target='_blank' class='btn waves-effect  orange green-4' type='button' id='vercarrito'" + cuenta + "  name='vercarrito'" + cuenta + "><i class='fas fa-shopping-cart'></i></a>"
                    if (dd[key].productobonus  == 1) {
                        valorbonus = "Cange por " + dd[key].bonus + " bonus";
                    } else {
                        valorbonus = "";
                    }

                    if (dd[key].tieneventaja) {

                        tituloventaja = dd[key].tituloventaja;
                        precioventaja = "$ " + dd[key].precioventaja;

                        if (tituloventaja.trim() == "" || precioventaja == 0) {
                            tituloventaja = "";
                            precioventaja = "";
                        }
                    } else {
                        tituloventaja = "";
                        precioventaja = "";
                    }

                    if (dd[key].observaciones != "") {
                        parteobservacion = "<div class='col'><p><a class='btn light-green lighten-3 text-green darken-4 textobotonextras' data-toggle='collapse' href='#collapseObservaciones" + cuenta + "' role='button' aria-expanded='false' aria-controls='collapseObservaciones" + cuenta + "'>Saber mas...</a></p></div>";
                        colapsoobservaciones = "<div class='collapse' id='collapseObservaciones" + cuenta + "'><div class='card card-body extradescripcion'>" + dd[key].observaciones + "</div></div>";
                    }

                    if (dd[key].comentarios != "") {
                        partecomentarios = "<div class='col'><p><a class='btn light-green lighten-3 yellow-text text-lighten-5 brown darken-1 textobotonextras' data-toggle='collapse' href='#collapseComentarios" + cuenta + "' role='button' aria-expanded='false' aria-controls='collapseComentarios" + cuenta + "'>Sugerencias</a></p></div>";
                        colapsocomentarios = "<div class='collapse' id='collapseComentarios" + cuenta + "'><div class='card card-body extradescripcion'>" + dd[key].comentarios + "</div></div>";
                    }

                    if (dd[key].nopublicar == 0) {
                        if (seveelprecio == true) {

                           var precio;
                            if (dd[key].precio > 0) {
                                precio = "$ " + dd[key].precio;
                            } else {
                                precio = "Consultar Precio";
                                tituloventaja = "";
                                precioventaja = "";
                            }

                            //t.append("<div class='col-sm-3 hijos'><div class='card'><div class='row'><img src='" + rutadeimagenes + dd[key].imagen + "' class='card-img-top materialboxed center-align tamaimagen' alt='...'></img></div><div class='card-body'><h5 id='titulotarjeta' class='center'>" + dd[key].titulo + "</h5><p id='descripciontarjeta' class='card-text center'>" + dd[key].descripcion + "</p><hr><div class='row justify-content-center'><div class='col-sm-4 '><p id='preciotarjeta' class='center filapreciotarjeta preciotarjeta'>" + precio + "</p></div><div class='col-sm-4'>" + botoncarrito + "</div><div class='col-sm-4'></div></div></div><div class='row'>" + parteobservacion + partecomentarios + "</div><div class='row'>" + colapsoobservaciones + "</div><div class='row'>" + colapsocomentarios + "</div></div></div> ");

                            // t.append("<div class='col-sm-3 hijosofer'><div class='card'><div class='row'><img src='" + rutadeimagenes + dd[key].imagen + "' class='card-img-top materialboxed center-align tamaimagen' alt='...'></img></div><div class=''><h5 id='titulotarjeta' class='center m-1'>" + dd[key].titulo + "</h5><p id='descripciontarjeta' class='card-text center m-1'>" + dd[key].descripcion + "</p><hr><div class='row justify-content-center'><div class='col-sm-8 '><p id='preciotarjeta' class='left ml-3 filapreciotarjeta preciotarjeta'>" + precio + "</p></div><div class='col-sm-4'><p class='valorbonus'>" + valorbonus + "</p></div><div class='row justify-content-center'><div class='col-sm-4 '><p id='titventaja' class='left tituloventaja mb-0 ml-3'>" + tituloventaja + "</p></div><div class='col-sm-4'><p id='preventaja' class='left ml-2 precioventaja'><del>" + precioventaja + "</del></p></div><div class='col-sm-4'></div></div></div><div class='row'>" + parteobservacion + partecomentarios + "</div><div class='row'>" + colapsoobservaciones + "</div><div class='row'>" + colapsocomentarios + "</div></div></div>");
                            t.append("<div class='col-sm-3 hijosofer'><div class='card'><div class='row'><img src='" + rutadeimagenes + dd[key].imagen + "' class='card-img-top materialboxed center-align tamaimagen' alt='...'></img></div><div class=''><h5 id='titulotarjeta' class='center m-1'>" + dd[key].titulo + "</h5><p id='descripciontarjeta' class='card-text center m-1'>" + dd[key].descripcion + "</p><hr><div class='row justify-content-center'><div class='col-sm-6 '><p id='preciotarjeta' class='left ml-3 filapreciotarjeta preciotarjeta'>" + precio + "</p></div><div class='col-sm-6'><p class='valorbonus'>" + valorbonus + "</p></div></div><div class='row justify-content-center'><div class='col-sm-6 '><p id='titventaja' class='left tituloventaja mb-0 ml-2'>" + tituloventaja + "</p><p id='preventaja' class='left ml-2 precioventaja'><del>" + precioventaja + "</del></p></div><div class='col-sm-6'></div></div></div><div class='row'>" + parteobservacion + partecomentarios + "</div><div class='row'>" + colapsoobservaciones + "</div><div class='row'>" + colapsocomentarios + "</div></div></div>");
                                        

                        }
                    }
                });

                imageneszoom();
            },
                error: function (e) 
                {
                    M.toast(
                    {
                        html: 'No hay buena conexión!',
                        displayLength: '4000'
                    });
                console.log("Error de comunicación");
            }
        });
    }

    $(document).ready(function ()
    {

        consultaranunciosofertas();
       
        
    });
</script>